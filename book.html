<!DOCTYPE html>
<html lang="zh-CN">
    <head><base target="_Blank"></head>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" >
    <style>
        .content,
        .right {
            padding: 15px;
        }

        .content a {
            display: block;
            margin: 10px 0;
            background: lightblue;
        }

        .content .media-object {
            width: 100px;
        }
    </style>
</head>

<body getData()>
<div>xcjiasdiasdoianfaifaisdmaois</div>

    <div class="container">

        <div class="row">

            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <div class="content">
                    <div>
                        <h5>xxxx</h5>
                    </div>
                </div>
                <button class="btn btn-success">获取数据</button>
            </div>

            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <div class="right">
                    <!-- <button class="btn btn-success">获取数据</button> -->
                </div>
            </div>


        </div>

    </div>


    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

    <script>
var books=null
var obs=null
var box=[]
var xxb=null
function getData(){
	       if(document.URL.indexOf("?")<0) return;//获取当前url地址,如果没参数.直接返回
	       var str=document.URL.split("?")[1];
	       var obj={};
	       var arr;
	       //当只有一个参数传过来时
	       if(str.indexOf("&")<0){
	           if(str.indexOf("%22")<0) return;
	           arr=str.split("%22");
	           obj[arr[0]]=arr[1];
               obs=obj[""]
	           
	       }
	   }

       $(document).ready(function(){
 
 console.log('xxx');
 var xhr =  new XMLHttpRequest();
xhr.onreadystatechange = function () {
 if(xhr.readyState == 4){
     if(xhr.status >= 200 && xhr.status < 304 || xhr.status == 304){
         console.log(xhr.responseText);  
         xxb=  xhr.responseText
         var as=JSON.parse(this.response)
       books=as.data.chapterList
       console.log(books); 
       xxx(books)
       localStorage.string=xxb
     }
 }
}
xhr.open('get', 'https://api.pingcc.cn/fictionChapter/search/'+obs+'');
xhr.send(null);
});

       function getConsole(index){
    $('.media')[index].addEventListener("click", function() {
        console.log(index);

    });
   
}

// window.οnlοad=function(){
//     getData()
// },
	console.log(getData());
    // document.onready = init(getData())
       


















        $('button').click(function (e) {
            console.log("xxx");
            e.preventDefault();
            $.ajax({
    url: 'http://api.pingcc.cn/fiction/search/title/从神王体开始无敌',
    type: 'get',
    dataType: 'jsonp',  // 请求方式为jsonp
    jsonpCallback: "handleCallback",  // 自定义回调函数名
    data: {}
    
})
console.log(jsonpCallback)
;
            // $.get("https://api.apiopen.top/getWangYiNews", {
            //         page: pageNum,
            //         count: 5
            //     },
            //     function (data, textStatus, jqXHR) {
            //         // console.log(data);

            //         xxx(data.result)
            //         pageNum++
            //     },
            //     "json"
            // );
        });

        function xxx(arr) {
            $.each(arr, function (i, e) {
                //  console.log(valueOfElement);
                $('.content').append('<a href=read.html?' +i+
                    ' target="_Self"><h5>'+arr[i].title+'</h5></a>');
box.push(arr[i])
                   
            });
        }
    </script>
</body>

</html>